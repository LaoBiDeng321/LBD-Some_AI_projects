<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日期距离计算器</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }
        
        .calendar-container {
            flex: 1.2;
            min-width: 350px;
            background-color: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .calendar-header h2 {
            color: #2c3e50;
            font-size: 1.8rem;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
        }
        
        .nav-button {
            background-color: #3498db;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            transition: background-color 0.3s;
        }
        
        .nav-button:hover {
            background-color: #2980b9;
        }
        
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: #7f8c8d;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day {
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .calendar-day:hover {
            background-color: #f0f7ff;
            transform: translateY(-2px);
        }
        
        .calendar-day.current-month {
            color: #333;
        }
        
        .calendar-day.other-month {
            color: #bdc3c7;
        }
        
        .calendar-day.today {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.selected {
            background-color: #2ecc71;
            color: white;
            font-weight: bold;
        }
        
        .calendar-day.past-date {
            color: #95a5a6;
        }
        
        .result-container {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .result-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .selected-date-display {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: center;
            border-left: 5px solid #3498db;
        }
        
        .selected-date-text {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 8px;
        }
        
        .selected-date-value {
            font-size: 1.8rem;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .distance-result {
            background: linear-gradient(135deg, #3498db, #2ecc71);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .distance-value {
            font-size: 3.5rem;
            font-weight: bold;
            margin: 15px 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        .distance-label {
            font-size: 1.2rem;
        }
        
        .quick-selection {
            margin-top: 20px;
        }
        
        .quick-selection h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quick-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .quick-button {
            flex: 1;
            min-width: 120px;
            padding: 12px 15px;
            background-color: #ecf0f1;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            color: #2c3e50;
        }
        
        .quick-button:hover {
            background-color: #d5dbdb;
            transform: translateY(-2px);
        }
        
        .instructions {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }
        
        .instructions h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions p {
            color: #7f8c8d;
            line-height: 1.6;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .calendar-container, .result-container {
                width: 100%;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .distance-value {
                font-size: 2.8rem;
            }
            
            .control-buttons {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
        /* 确保隐藏的模块不占用空间 */
        .hidden {
            display: none !important;
        }
        
        .today-button {
            margin-top: 15px;
            padding: 12px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
            width: 100%;
        }
        
        .today-button:hover {
            background-color: #2980b9;
        }
        
        /* 新增的天数跳转区域样式 */
        .jump-container {
            background-color: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        
        .jump-section {
            margin-bottom: 25px;
        }
        
        .jump-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .jump-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .jump-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            transition: border-color 0.3s;
        }
        
        .jump-input:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .jump-button {
            padding: 12px 25px;
            background-color: #9b59b6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1.1rem;
            transition: background-color 0.3s;
        }
        
        .jump-button:hover {
            background-color: #8e44ad;
        }
        
        .preset-days {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .preset-day {
            padding: 12px 10px;
            background-color: #e8f4fc;
            border: 2px solid #3498db;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .preset-day:hover {
            background-color: #3498db;
            color: white;
            transform: translateY(-2px);
        }
        
        .result-message {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            background-color: #e8f6f3;
            border-left: 5px solid #2ecc71;
            display: none;
        }
        
        .result-message.show {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .control-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-item {
            flex: 1;
            min-width: 200px;
        }
        
        .control-item label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }
        
        .control-item input, .control-item select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .control-item input:focus, .control-item select:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .date-display {
            font-size: 1.2rem;
            font-weight: 500;
            color: #2c3e50;
            text-align: center;
            margin-top: 10px;
        }
        
        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .date-jump-result {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            text-align: center;
            border: 2px dashed #3498db;
        }
        
        .date-jump-result h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .date-jump-result p {
            font-size: 1.5rem;
            color: #2c3e50;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .date-jump-result .days-count {
            font-size: 2.5rem;
            color: #e74c3c;
            font-weight: bold;
            margin: 10px 0;
        }
        
        /* 模块控制面板样式 */
        .module-control {
            background-color: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }
        
        .module-control:hover {
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }
        
        .module-control h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }
        
        .control-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            color: #2c3e50;
            cursor: pointer;
            padding: 10px 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background-color: #f8f9fa;
        }
        
        .control-checkbox:hover {
            background-color: #e8f4fc;
            border-color: #3498db;
            transform: translateY(-1px);
        }
        
        .control-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #3498db;
            transition: all 0.3s ease;
        }
        
        .control-checkbox input[type="checkbox"]:checked {
            box-shadow: 0 0 0 2px white, 0 0 0 4px #3498db;
        }
        
        /* 选中状态的样式 */
        .control-checkbox:has(input:checked) {
            background-color: #e8f4fc;
            border-color: #3498db;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 模块控制面板 -->
        <div class="module-control">
            <h3><i class="fas fa-sliders-h"></i> 模块显示控制</h3>
            <div class="control-buttons">
                <label class="control-checkbox"><input type="checkbox" id="show-header" checked> 显示头部</label>
                <label class="control-checkbox"><input type="checkbox" id="show-calendar" checked> 显示日历</label>
                <label class="control-checkbox"><input type="checkbox" id="show-result" checked> 显示结果</label>
                <label class="control-checkbox"><input type="checkbox" id="show-jump" checked> 显示天数跳转</label>
                <label class="control-checkbox"><input type="checkbox" id="show-interval" checked> 显示日期区间计算</label>
            </div>
        </div>
        
        <header id="module-header">
            <h1><i class="fas fa-calendar-alt"></i> 日期距离计算器 - 增强版</h1>
            <p class="subtitle">点击日历中的日期查看距离今天的天数，或输入天数快速跳转到指定日期</p>
        </header>
        
        <div class="main-content">
            <div class="calendar-container" id="module-calendar">
                <div class="calendar-header">
                    <h2 id="current-month-year">2023年10月</h2>
                    <div class="nav-buttons">
                        <button class="nav-button" id="prev-year"><i class="fas fa-angle-double-left"></i></button>
                        <button class="nav-button" id="prev-month"><i class="fas fa-angle-left"></i></button>
                        <button class="nav-button" id="today-btn">今</button>
                        <button class="nav-button" id="next-month"><i class="fas fa-angle-right"></i></button>
                        <button class="nav-button" id="next-year"><i class="fas fa-angle-double-right"></i></button>
                    </div>
                </div>
                
                <div class="calendar-weekdays">
                    <div>日</div>
                    <div>一</div>
                    <div>二</div>
                    <div>三</div>
                    <div>四</div>
                    <div>五</div>
                    <div>六</div>
                </div>
                
                <div class="calendar-days" id="calendar-days">
                    <!-- 日历日期将通过JavaScript动态生成 -->
                </div>
                
                <button class="today-button" id="go-today">
                    <i class="fas fa-calendar-day"></i> 返回今天
                </button>
                
                <div class="instructions">
                    <h3><i class="fas fa-info-circle"></i> 使用说明</h3>
                    <p>1. 点击日历中的任意日期查看距离今天的天数</p>
                    <p>2. 绿色高亮表示选中的日期，蓝色表示今天</p>
                    <p>3. 使用左右箭头按钮切换月份，点击"今"按钮返回今天</p>
                    <p>4. 下方提供快速选择按钮，可快速查看常用日期距离</p>
                    <p>5. 新增天数跳转功能：输入天数，快速跳转到未来或过去的日期</p>
                </div>
            </div>
            
            <div class="result-container" id="module-result">
                <h2 class="result-title">日期距离计算结果</h2>
                
                <div class="selected-date-display">
                    <div class="selected-date-text">选中的日期</div>
                    <div class="selected-date-value" id="selected-date-display">未选择日期</div>
                </div>
                
                <div class="distance-result">
                    <div class="distance-label">距离今天</div>
                    <div class="distance-value" id="distance-value">0</div>
                    <div class="distance-label" id="distance-label">天</div>
                </div>
                
                <div class="quick-selection">
                    <h3><i class="fas fa-bolt"></i> 快速选择</h3>
                    <div class="quick-buttons">
                        <button class="quick-button" data-days="1">明天</button>
                        <button class="quick-button" data-days="7">一周后</button>
                        <button class="quick-button" data-days="30">一个月后</button>
                        <button class="quick-button" data-days="365">一年后</button>
                        <button class="quick-button" data-days="-1">昨天</button>
                        <button class="quick-button" data-days="-7">一周前</button>
                        <button class="quick-button" data-days="-30">一个月前</button>
                        <button class="quick-button" data-days="-365">一年前</button>
                    </div>
                </div>
                
                <div class="quick-selection">
                    <h3><i class="fas fa-calendar-check"></i> 特殊日期</h3>
                    <div class="quick-buttons">
                        <button class="quick-button" id="new-year">元旦</button>
                        <button class="quick-button" id="spring-festival">春节</button>
                        <button class="quick-button" id="mid-autumn">中秋节</button>
                        <button class="quick-button" id="christmas">圣诞节</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 新增的天数跳转区域 -->
        <div class="jump-container">
            <div class="jump-section" id="module-jump">
                <h3><i class="fas fa-forward"></i> 天数跳转功能</h3>
                <p>输入天数（正数为未来日期，负数为过去日期），快速跳转到指定日期</p>
                
                <div class="control-group">
                    <div class="control-item">
                        <label for="jump-days"><i class="fas fa-calendar-plus"></i> 输入天数</label>
                        <input type="number" id="jump-days" placeholder="例如: 100 或 -50" value="100" min="-10000" max="10000">
                    </div>
                    
                    <div class="control-item">
                        <label for="base-date"><i class="fas fa-calendar-day"></i> 基准日期</label>
                        <select id="base-date">
                            <option value="today">今天</option>
                            <option value="selected">当前选中日期</option>
                            <option value="custom">自定义日期</option>
                        </select>
                    </div>
                    
                    <div class="control-item" id="custom-date-container" style="display: none;">
                        <label for="custom-date"><i class="fas fa-calendar-alt"></i> 自定义基准日期</label>
                        <input type="date" id="custom-date">
                    </div>
                </div>
                
                <div class="jump-input-group">
                    <input type="text" id="days-input" class="jump-input" placeholder="输入天数，例如: 100 或 -50">
                    <button id="jump-button" class="jump-button">
                        <i class="fas fa-rocket"></i> 跳转到日期
                    </button>
                </div>
                
                <div class="preset-days">
                    <div class="preset-day" data-days="7">7天后</div>
                    <div class="preset-day" data-days="30">30天后</div>
                    <div class="preset-day" data-days="100">100天后</div>
                    <div class="preset-day" data-days="-7">7天前</div>
                    <div class="preset-day" data-days="-30">30天前</div>
                    <div class="preset-day" data-days="-100">100天前</div>
                    <div class="preset-day" data-days="365">一年后</div>
                    <div class="preset-day" data-days="-365">一年前</div>
                </div>
                
                <div class="date-jump-result" id="jump-result">
                    <h4><i class="fas fa-calendar-check"></i> 跳转结果</h4>
                    <div id="jump-result-text">输入天数并点击跳转按钮查看结果</div>
                </div>
            </div>
            
            <div class="jump-section" id="module-interval">
                <h3><i class="fas fa-exchange-alt"></i> 日期区间计算</h3>
                <p>计算两个日期之间的天数差</p>
                
                <div class="control-group">
                    <div class="control-item">
                        <label for="start-date"><i class="fas fa-calendar"></i> 开始日期</label>
                        <input type="date" id="start-date">
                    </div>
                    
                    <div class="control-item">
                        <label for="end-date"><i class="fas fa-calendar"></i> 结束日期</label>
                        <input type="date" id="end-date">
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 15px;">
                    <button id="calculate-difference" class="jump-button">
                        <i class="fas fa-calculator"></i> 计算天数差
                    </button>
                </div>
                
                <div class="date-jump-result" id="difference-result" style="display: none;">
                    <h4><i class="fas fa-calendar-check"></i> 计算结果</h4>
                    <div id="difference-result-text"></div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>© 2023 日期距离计算器 - 增强版 | 设计：前端工具 | 使用本地日期计算，无需网络连接</p>
        </footer>
    </div>

    <script>
        // 当前显示的年月
        let currentDate = new Date();
        let selectedDate = new Date();
        let today = new Date();
        
        // 初始化日历
        function initCalendar() {
            updateCalendar();
            updateResult();
            
            // 添加事件监听器
            document.getElementById('prev-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                updateCalendar();
            });
            
            document.getElementById('next-month').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                updateCalendar();
            });
            
            document.getElementById('prev-year').addEventListener('click', () => {
                currentDate.setFullYear(currentDate.getFullYear() - 1);
                updateCalendar();
            });
            
            document.getElementById('next-year').addEventListener('click', () => {
                currentDate.setFullYear(currentDate.getFullYear() + 1);
                updateCalendar();
            });
            
            document.getElementById('today-btn').addEventListener('click', () => {
                currentDate = new Date();
                updateCalendar();
            });
            
            document.getElementById('go-today').addEventListener('click', () => {
                currentDate = new Date();
                selectedDate = new Date();
                updateCalendar();
                updateResult();
                updateJumpResult();
            });
            
            // 快速选择按钮
            document.querySelectorAll('.quick-button[data-days]').forEach(button => {
                button.addEventListener('click', () => {
                    const days = parseInt(button.getAttribute('data-days'));
                    const newDate = new Date();
                    newDate.setDate(newDate.getDate() + days);
                    
                    selectedDate = newDate;
                    currentDate = new Date(newDate);
                    updateCalendar();
                    updateResult();
                    updateJumpResult();
                });
            });
            
            // 特殊日期按钮
            document.getElementById('new-year').addEventListener('click', () => {
                const year = new Date().getFullYear() + 1;
                selectedDate = new Date(year, 0, 1); // 明年元旦
                currentDate = new Date(selectedDate);
                updateCalendar();
                updateResult();
                updateJumpResult();
            });
            
            document.getElementById('spring-festival').addEventListener('click', () => {
                // 简单实现，实际春节日期需要复杂计算
                const year = new Date().getFullYear();
                // 假设春节是1月25日（仅示例）
                selectedDate = new Date(year, 0, 25);
                // 如果已经过了今年春节，则显示明年春节
                if (selectedDate < new Date()) {
                    selectedDate.setFullYear(year + 1);
                }
                currentDate = new Date(selectedDate);
                updateCalendar();
                updateResult();
                updateJumpResult();
            });
            
            document.getElementById('mid-autumn').addEventListener('click', () => {
                // 简单实现，中秋节一般是农历八月十五，这里用9月15日示例
                const year = new Date().getFullYear();
                selectedDate = new Date(year, 8, 15); // 9月15日
                // 如果已经过了今年中秋节，则显示明年中秋节
                if (selectedDate < new Date()) {
                    selectedDate.setFullYear(year + 1);
                }
                currentDate = new Date(selectedDate);
                updateCalendar();
                updateResult();
                updateJumpResult();
            });
            
            document.getElementById('christmas').addEventListener('click', () => {
                const year = new Date().getFullYear();
                selectedDate = new Date(year, 11, 25); // 12月25日
                // 如果已经过了今年圣诞节，则显示明年圣诞节
                if (selectedDate < new Date()) {
                    selectedDate.setFullYear(year + 1);
                }
                currentDate = new Date(selectedDate);
                updateCalendar();
                updateResult();
                updateJumpResult();
            });
            
            // 天数跳转功能
            document.getElementById('jump-button').addEventListener('click', jumpToDate);
            
            // 预设天数按钮
            document.querySelectorAll('.preset-day').forEach(button => {
                button.addEventListener('click', () => {
                    const days = parseInt(button.getAttribute('data-days'));
                    document.getElementById('days-input').value = days;
                    document.getElementById('jump-days').value = days;
                    jumpToDate();
                });
            });
            
            // 输入框回车键支持
            document.getElementById('days-input').addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    jumpToDate();
                }
            });
            
            document.getElementById('jump-days').addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    jumpToDate();
                }
            });
            
            // 同步两个输入框的值
            document.getElementById('days-input').addEventListener('input', () => {
                document.getElementById('jump-days').value = document.getElementById('days-input').value;
            });
            
            document.getElementById('jump-days').addEventListener('input', () => {
                document.getElementById('days-input').value = document.getElementById('jump-days').value;
            });
            
            // 基准日期选择
            document.getElementById('base-date').addEventListener('change', () => {
                const baseDate = document.getElementById('base-date').value;
                const customDateContainer = document.getElementById('custom-date-container');
                
                if (baseDate === 'custom') {
                    customDateContainer.style.display = 'block';
                } else {
                    customDateContainer.style.display = 'none';
                }
            });
            
            // 计算两个日期之间的天数差
            document.getElementById('calculate-difference').addEventListener('click', calculateDateDifference);
            
            // 设置日期输入框的默认值
            const todayStr = today.toISOString().split('T')[0];
            document.getElementById('start-date').value = todayStr;
            const futureDate = new Date();
            futureDate.setDate(futureDate.getDate() + 30);
            document.getElementById('end-date').value = futureDate.toISOString().split('T')[0];
            document.getElementById('custom-date').value = todayStr;
            
            // 初始更新跳转结果显示
            updateJumpResult();
        }
        
        // 更新日历显示
        function updateCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // 更新月份标题
            const monthNames = ["一月", "二月", "三月", "四月", "五月", "六月", 
                              "七月", "八月", "九月", "十月", "十一月", "十二月"];
            document.getElementById('current-month-year').textContent = 
                `${year}年 ${monthNames[month]}`;
            
            // 获取月份的第一天和最后一天
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            
            // 获取第一天是星期几（0 = 星期日）
            const firstDayOfWeek = firstDay.getDay();
            
            // 清空日历
            const calendarDays = document.getElementById('calendar-days');
            calendarDays.innerHTML = '';
            
            // 添加上个月的日期
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = firstDayOfWeek - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = prevMonthLastDay - i;
                day.dataset.date = new Date(year, month - 1, prevMonthLastDay - i).toISOString();
                calendarDays.appendChild(day);
            }
            
            // 添加本月的日期
            const todayStr = today.toDateString();
            const selectedStr = selectedDate.toDateString();
            
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                const date = new Date(year, month, i);
                const dateStr = date.toDateString();
                
                day.className = 'calendar-day current-month';
                day.textContent = i;
                day.dataset.date = date.toISOString();
                
                // 检查是否是今天
                if (dateStr === todayStr) {
                    day.classList.add('today');
                }
                
                // 检查是否是选中的日期
                if (dateStr === selectedStr) {
                    day.classList.add('selected');
                }
                
                // 检查是否是过去的日期
                if (date < today && dateStr !== todayStr) {
                    day.classList.add('past-date');
                }
                
                // 添加点击事件
                day.addEventListener('click', () => {
                    selectedDate = new Date(day.dataset.date);
                    updateCalendar();
                    updateResult();
                    updateJumpResult();
                });
                
                calendarDays.appendChild(day);
            }
            
            // 添加下个月的日期
            const totalCells = 42; // 6行 * 7列
            const remainingCells = totalCells - (firstDayOfWeek + daysInMonth);
            
            for (let i = 1; i <= remainingCells; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.textContent = i;
                day.dataset.date = new Date(year, month + 1, i).toISOString();
                calendarDays.appendChild(day);
            }
        }
        
        // 更新结果区域
        function updateResult() {
            // 格式化日期显示
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            const formattedDate = selectedDate.toLocaleDateString('zh-CN', options);
            document.getElementById('selected-date-display').textContent = formattedDate;
            
            // 计算距离今天的天数
            const timeDiff = selectedDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            // 更新显示
            document.getElementById('distance-value').textContent = Math.abs(daysDiff);
            
            let label = "天";
            if (daysDiff > 0) {
                label = "天后";
            } else if (daysDiff < 0) {
                label = "天前";
            } else {
                label = "今天";
            }
            
            document.getElementById('distance-label').textContent = label;
            
            // 根据天数差调整颜色
            const distanceResult = document.querySelector('.distance-result');
            
            if (daysDiff > 0) {
                distanceResult.style.background = "linear-gradient(135deg, #3498db, #2ecc71)";
            } else if (daysDiff < 0) {
                distanceResult.style.background = "linear-gradient(135deg, #e74c3c, #f39c12)";
            } else {
                distanceResult.style.background = "linear-gradient(135deg, #3498db, #9b59b6)";
            }
        }
        
        // 跳转到指定天数后的日期
        function jumpToDate() {
            const daysInput = document.getElementById('days-input');
            const days = parseInt(daysInput.value);
            
            if (isNaN(days)) {
                alert('请输入有效的天数！');
                daysInput.focus();
                return;
            }
            
            // 获取基准日期
            const baseDateType = document.getElementById('base-date').value;
            let baseDate;
            
            if (baseDateType === 'today') {
                baseDate = new Date();
            } else if (baseDateType === 'selected') {
                baseDate = new Date(selectedDate);
            } else if (baseDateType === 'custom') {
                const customDateStr = document.getElementById('custom-date').value;
                if (!customDateStr) {
                    alert('请选择自定义基准日期！');
                    return;
                }
                baseDate = new Date(customDateStr);
            }
            
            // 计算新日期
            const newDate = new Date(baseDate);
            newDate.setDate(newDate.getDate() + days);
            
            // 更新选中的日期和日历显示
            selectedDate = newDate;
            currentDate = new Date(newDate);
            
            // 更新界面
            updateCalendar();
            updateResult();
            updateJumpResult(days, baseDate, newDate);
        }
        
        // 更新跳转结果显示
        function updateJumpResult(days, baseDate, targetDate) {
            const jumpResult = document.getElementById('jump-result');
            const jumpResultText = document.getElementById('jump-result-text');
            
            if (days !== undefined && baseDate && targetDate) {
                // 格式化日期显示
                const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
                const baseDateStr = baseDate.toLocaleDateString('zh-CN', options);
                const targetDateStr = targetDate.toLocaleDateString('zh-CN', options);
                
                // 计算两个日期之间的实际天数差（确保准确）
                const timeDiff = targetDate.getTime() - baseDate.getTime();
                const actualDaysDiff = Math.round(timeDiff / (1000 * 3600 * 24));
                
                jumpResultText.innerHTML = `
                    <p>从 <span class="highlight">${baseDateStr}</span></p>
                    <p>${days > 0 ? '向后' : '向前'} <span class="days-count">${Math.abs(actualDaysDiff)}</span> 天</p>
                    <p>得到日期：<span class="highlight">${targetDateStr}</span></p>
                `;
            } else {
                // 显示默认信息
                const selectedDateStr = selectedDate.toLocaleDateString('zh-CN', 
                    { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
                const todayStr = today.toLocaleDateString('zh-CN', 
                    { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' });
                    
                jumpResultText.innerHTML = `
                    <p>当前选中日期：<span class="highlight">${selectedDateStr}</span></p>
                    <p>今天是：<span class="highlight">${todayStr}</span></p>
                    <p>在左侧输入天数并点击"跳转到日期"按钮</p>
                `;
            }
        }
        
        // 计算两个日期之间的天数差
        function calculateDateDifference() {
            const startDateStr = document.getElementById('start-date').value;
            const endDateStr = document.getElementById('end-date').value;
            
            if (!startDateStr || !endDateStr) {
                alert('请选择开始日期和结束日期！');
                return;
            }
            
            const startDate = new Date(startDateStr);
            const endDate = new Date(endDateStr);
            
            // 计算天数差
            const timeDiff = endDate.getTime() - startDate.getTime();
            const daysDiff = Math.round(timeDiff / (1000 * 3600 * 24));
            
            // 格式化日期显示
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            const startDateFormatted = startDate.toLocaleDateString('zh-CN', options);
            const endDateFormatted = endDate.toLocaleDateString('zh-CN', options);
            
            // 显示结果
            const differenceResult = document.getElementById('difference-result');
            const differenceResultText = document.getElementById('difference-result-text');
            
            differenceResult.style.display = 'block';
            
            let relationText = '';
            if (daysDiff > 0) {
                relationText = `<span class="days-count">${daysDiff}</span> 天`;
            } else if (daysDiff < 0) {
                relationText = `<span class="days-count">${Math.abs(daysDiff)}</span> 天`;
            } else {
                relationText = '<span class="days-count">0</span> 天（同一天）';
            }
            
            differenceResultText.innerHTML = `
                <p>从 <span class="highlight">${startDateFormatted}</span></p>
                <p>到 <span class="highlight">${endDateFormatted}</span></p>
                <p>相隔：${relationText}</p>
            `;
        }
        
        // 更新模块可见性
        function updateModuleVisibility() {
            // 控制头部显示
            const headerModule = document.getElementById('module-header');
            headerModule.style.display = document.getElementById('show-header').checked ? 'block' : 'none';
            
            // 控制日历显示
            const calendarModule = document.getElementById('module-calendar');
            calendarModule.style.display = document.getElementById('show-calendar').checked ? 'block' : 'none';
            
            // 控制结果显示
            const resultModule = document.getElementById('module-result');
            resultModule.style.display = document.getElementById('show-result').checked ? 'block' : 'none';
            
            // 控制天数跳转显示
            const jumpModule = document.getElementById('module-jump');
            jumpModule.style.display = document.getElementById('show-jump').checked ? 'block' : 'none';
            
            // 控制日期区间计算显示
            const intervalModule = document.getElementById('module-interval');
            intervalModule.style.display = document.getElementById('show-interval').checked ? 'block' : 'none';
            
            // 如果天数跳转和日期区间计算都隐藏，则隐藏整个jump-container
            const jumpContainer = document.querySelector('.jump-container');
            const showJump = document.getElementById('show-jump').checked;
            const showInterval = document.getElementById('show-interval').checked;
            jumpContainer.style.display = (showJump || showInterval) ? 'block' : 'none';
            
            // 如果日历和结果都隐藏，则隐藏整个main-content
            const mainContent = document.querySelector('.main-content');
            const showCalendar = document.getElementById('show-calendar').checked;
            const showResult = document.getElementById('show-result').checked;
            mainContent.style.display = (showCalendar || showResult) ? 'flex' : 'none';
        }
        
        // 初始化模块控制
        function initModuleControl() {
            // 添加事件监听器
            document.getElementById('show-header').addEventListener('change', updateModuleVisibility);
            document.getElementById('show-calendar').addEventListener('change', updateModuleVisibility);
            document.getElementById('show-result').addEventListener('change', updateModuleVisibility);
            document.getElementById('show-jump').addEventListener('change', updateModuleVisibility);
            document.getElementById('show-interval').addEventListener('change', updateModuleVisibility);
            
            // 初始更新可见性
            updateModuleVisibility();
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            initCalendar();
            initModuleControl();
        });
    </script>
</body>
</html>